<!DOCTYPE html>
<html lang="en">
<head>
<title>OpenDTU Web Display</title>
<script type="text/javascript" src="webDisplay.js"></script>
<style>
.tooltip_pixelpos {
  position: absolute;
  top: -30px;
  left: 0;
  display: none;
  padding: 5px;
  background-color: #000;
  color: #fff;
  font-size: 12px;
}
</style>
</head>
<body>

<!-- <div class="tooltip_pixelpos"> -->
<canvas id="OpenDTUWebDisplay" width="1500" height="1500"></canvas>
<!-- </div> -->
<script type="text/javascript">
        var canvas = document.getElementById("OpenDTUWebDisplay");
        var canvasContext = canvas.getContext("2d");
        var webDisplay = new OpenDTUWebDisplay(canvasContext, "/api/display/getbuffer", 1000);

/*
        TODO: Add option (on/off) to mark each "dot" of display with a mouse-over and display coords at mouse position

        var tooltip_pixelpos = document.querySelector('.tooltip_pixelpos');

        canvas.addEventListener('mouseover', () => {
            tooltip_pixelpos.style.display = 'block';
        });
        canvas.addEventListener('mouseout', () => {
            tooltip_pixelpos.style.display = 'none';
        });
        canvas.addEventListener('mousemove', (e) => {
            tooltip_pixelpos.style.left = e.clientX + 'px';
            tooltip_pixelpos.style.top = e.clientY - tooltip.offsetHeight - 10 + 'px';
            tooltip_pixelpos.textContent = `X: ${e.offsetX}, Y: ${e.offsetY}`;
        });

*/
</script>




<table border="0" width="720">
    <tr>
        <td>
            Refresh page every: <div id="refresh_value">1s</div>
            <input id="refresh_range" type="range" min="0" max="20" step="0.5" value="1" orient="horizontal">
        </td>
        <td>
            Burn-In-Check:<div id="burn_in_value">disabled</div>
            <input id="burn_in_range" type="range" min="1" max="20" step="1" value="0" orient="horizontal">
        </td>
    </tr>
<table>
<script>
    const burn_in_range = document.querySelector("#burn_in_range");
    const refresh_range = document.querySelector("#refresh_range");

    burn_in_range.addEventListener ("input", function () {
        //console.log(this.value);
        //console.log(output.value);
        //debugger;
        //    output.value = this.value;
        //output.innerText = this.value;
        //fg.style.opacity = this.value / 100.0;
        //bg.style.opacity = 1.0 - this.value / 100.0;
        const v = document.querySelector("#burn_in_value");
        if (this.value <= 1) {
            v.innerText = "disabled";
        } else {
            v.innerText = "last " + this.value + " frames";
        }
        webDisplay.lineBufferHistoryMax = this.value;
    });

    refresh_range.addEventListener ("input", function () {
        //console.log(this.value);
        const v = document.querySelector("#refresh_value");
        v.innerText = "" + this.value + "s";
        webDisplay.refreshRate = this.value * 1000;
    });
</script>



</body>
<!-- vim:set ts=4 sw=4 et: -->
</html>
